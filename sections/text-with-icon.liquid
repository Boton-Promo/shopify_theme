{{ 'text-with-icon.css' | asset_url | stylesheet_tag }}
{% render 'section-style' %}

<style>
  {%- if template == 'page.about-us' -%}
    .text-with-icons__list {
      gap: 0;
      overflow-x: hidden;
      overflow-y: hidden;
    }
    #main .text-with-icons__item.icon-top {
      flex-direction: column;
      gap: 0;
      text-align: center;
      padding: 0 34px;
      border-right: none;
      border-left: none;
      align-items: center;
      /* width: 33.3333%; */
    }
    #main .shopify-section--text-with-icons .placeholder-svg {
      display: none;
    }
    @media (max-width: 767px) {
      #main .text-with-icons__list {
        padding: 30px 0;
        flex-direction: column;
        align-items: center;
      }
      #main .text-with-icons__item.icon-top {
        /* padding: 30px 0;
        max-width: 278px; */
        width: 100%;
      }
    }
  {%- endif -%}

  #shopify-section-{{ section.id }} {
    --heading-color: {{ section.settings.heading_color | color_extract: 'red' }}, 
    {{ section.settings.heading_color | color_extract: 'green' }}, 
    {{ section.settings.heading_color | color_extract: 'blue' }};
    --color-body: {{ section.settings.text_color }};
    --title-color: {{ section.settings.title_color }};
    --vertical-breather: 40px;
    /* Inner spacing is smaller on this section */
    ;
    background-color: {{ section.settings.section_background }};
    position: relative;
  }
  .text-width-icon {
    position: relative;
    z-index: 1;
  }
  .shopify-section--text-with-icons .placeholder-svg {
    position: absolute;
    right: 0;
    top: 0;
    max-width: 185px;
    max-height: 185px;
  }
  #shopify-section-{{ section.id }}
  .text-with-icons {
    line-height: 0;
  }
  .text-with-icons.text-border {
    padding: 60px 0;
    border-width: 1px 0;
    border-style: solid;
    border-color: rgb(var(--border-color));
  }

  #shopify-section-{{ section.id }}
  .text-with-icons__item {
    background-color: {{ section.settings.bg_color_item }};
    transition: all 0.4s;
  }

  #shopify-section-{{ section.id }}.text-with-icons__item.icon-top:hover {
  ;
  /* background-color: var(--color-accent-1); */
}
#shopify-section-{{ section.id }}.text-with-icons__item.icon-top:hover .st1 {
  fill: #fff;
}
.text-with-icons .text-with-icons__item.icon-top:hover .text-with-icons__content-wrapper .heading--small.title-icon {
  color: var(--primary_hover);
}

.text-with-icons__icon-wrapper svg {
  fill: {{ section.settings.color_svg }};
}

#shopify-section-{{ section.id }}
.e-background-overlay {
  background-image: url({{ section.settings.background_overlay | image_url: width: 2000 }});
  opacity: .03;
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
  position: absolute;
}

@media (max-width: 1299px) {
/*
   .textwidthicon-child { 
   display: none; 
   } 
*/
}
</style>
{% if section.settings.show %}
  <div class="e-background-overlay"></div>
  <section class="section section--flush text-width-icon">
    <div class="text-with-icon">
      <div class="{{ section.settings.setwidthout }}">
        {% if section.settings.tab_heading != blank %}
          <header class="section__header text-{{ section.settings.text_align }}">
            <div class="text-container">
              <p class="heading sub-heading mb-10">{% render 'icon-heading' %}{{ section.settings.sub_heading }}</p>
              <h3 class="heading h{{ section.settings.tab_heading_size }}">{{ section.settings.tab_heading }}</h3>
              {% if section.settings.tab_description != blank %}
                <div class="heading-description">
                  {{ section.settings.tab_description }}
                </div>
              {% endif %}
            </div>
            {% if section.settings.image_child != blank %}
              <img
                class="textwidthicon-child"
                loading="lazy"
                sizes="(max-width: 740px) 80vw, (max-width: 999px) 60vw, 425px"
                alt=""
                src="{{ section.settings.image_child | image_url: width: section.settings.image_child.width }}"
                srcset="{%- if section.settings.image_child.width >= 195 -%}{{ section.settings.image_child | image_url: width: 195, crop: 'center' }} 195w,{%- endif -%}
                  {%- if section.settings.image_child.width >= 330 -%}{{ section.settings.image_child | image_url: width: 330, crop: 'center' }} 330w,{%- endif -%}
                  {%- if section.settings.image_child.width >= 535 -%}{{ section.settings.image_child | image_url: width: 535, crop: 'center' }} 535w,{%- endif -%}
                  {%- if section.settings.image_child.width >= 750 -%}{{ section.settings.image_child | image_url: width: 750, crop: 'center' }} 750w,{%- endif -%}
                  {%- if section.settings.image_child.width >= 1000 -%}{{ section.settings.image_child | image_url: width: 1000, crop: 'center' }} 1000w,{%- endif -%}
                  {%- if section.settings.image_child.width >= 1500 -%}{{ section.settings.image_child | image_url: width: 1500 }} 1500w,{%- endif -%}
                  {%- if section.settings.image_child.width >= 3000 -%}{{ section.settings.image_child | image_url: width: 3000, crop: 'center' }} 3000w,{%- endif -%}
                  {{ section.settings.image_child | image_url }} {{ section.settings.image_child.width }}w"
                src="{{ section.settings.image_child | image_url: width: 1500 }}"
                height="{{ section.settings.image_child.height }}"
                width="{{ section.settings.image_child.width }}">
            {% endif %}
          </header>
        {% endif %}
        <ap-carousel class="text-with-icons {% if section.settings.border %}text-border{% endif %}">
          <div class="text-with-icons__list hide-scrollbar">
            {% for block in section.blocks %}
              {%- case block.settings.width -%}
                {%- when '20%' -%}
                  {%- assign block_width = 'col-xl-20 col-md-50 col-100' -%}
                {%- when '25%' -%}
                  {%- assign block_width = 'col-xl-25 col-md-50 col-100' -%}
                {%- when '33%' -%}
                  {%- assign block_width = 'col-xl-33 col-md-50 col-100' -%}
                {%- when '50%' -%}
                  {%- assign block_width = 'col-xl-50 col-md-50 col-100' -%}
                {%- when '75%' -%}
                  {%- assign block_width = 'col-xl-75 col-md-50 col-100' -%}
                {%- when '100%' -%}
                  {%- assign block_width = 'col-100' -%}
              {%- endcase -%}
              <div id="block-{{ block.id }}" class="{{ block_width }} {{ block.settings.class }}">
                <ap-carousel-item
                  id="block-{{ block.id }}"
                  class="text-with-icons__item align-items-{{ section.settings.align_items }} justify-content-{{ section.settings.justify_content }} {%- if section.settings.text_icon_top -%}{{ 'icon-top' | prepend: ' ' }}{%- endif -%}"
                  {% if forloop.index != 1 %}
                  hidden=""
                  {% endif %}>
                  <div class="text-with-icons__icon-wrapper">
                    {% if block.settings.custom_icon != blank %}
                      {{ block.settings.custom_icon }}
                    {% else %}
                      {% render 'icons'
                        , svg_icon: block.settings.svg_icon %}
                    {% endif %}
                  </div>
                  <div class="text-with-icons__content-wrapper">
                    {% if block.settings.heading != blank %}
                      <p class="heading {{ block.settings.heading_size }} title-icon ">{{ block.settings.heading }}</p>
                    {% endif %}
                    {% if block.settings.content != blank %}
                      <p class="description-icon">{{ block.settings.content }}</p>
                    {% endif %}
                    {% if block.settings.button1_label != blank %}
                      <style>
                        #block-{{ block.id }}a.button.btn-base
                        , #block-{{ block.id }}
                        .btn-outline
                        , #block-{{ block.id }}
                        .btn-line
                        , #block-{{ block.id }}
                        .btn-line-black
                        , #block-{{ block.id }}
                        .btn-base {
                          color: {{ block.settings.color_btn }};
                          background-color: {{ block.settings.bg_btn }};
                          text-decoration: none;
                          border-color: {{ block.settings.color_btn }};
                        }
                        #block-{{ block.id }}.text-with-icons__item.icon-top:hover .btn-line {
                          color: #fff;
                        }
                        #block-{{ block.id }}
                        a.button.btn-base path
                        , #block-{{ block.id }}
                        .btn-outline path
                        , #block-{{ block.id }}
                        .btn-base path {
                          fill: {{ block.settings.color_btn }};
                        }
                        #block-{{ block.id }}a.button.btn-base:hover,
                        #block-{{ block.id }}.btn-outline:hover,
                        #block-{{ block.id }}.btn-line:hover,
                        #block-{{ block.id }}.btn-line-black:hover,
                        #block-{{ block.id }}.btn-base:hover {
                          color: {{ block.settings.color_btn_hover }};
                          background-color: {{ block.settings.bg_btn_hover }};
                          border-color: {{ block.settings.color_btn_hover }};
                        }
                        #block-{{ block.id }}.text-with-icons__item.icon-top .btn-line:hover {
                          color: {{ block.settings.color_btn_hover }};
                        }
                        #block-{{ block.id }}a.button.btn-base:hover path,
                        #block-{{ block.id }}.btn-outline:hover path,
                        #block-{{ block.id }}.btn-base:hover path {
                          fill: {{ block.settings.color_btn_hover }};
                        }
                      </style>
                      <a href="{{ block.settings.link1 }}" class="button {{ block.settings.style_btn }} btn-sm">
                        {{ block.settings.button1_label }}
                        {% render 'icon-arrow-2' %}
                      </a>
                    {% endif %}
                  </div>
                </ap-carousel-item>
              </div>
            {% endfor %}
          </div>
          <ap-pagedots class="text-with-icons__dots dots-nav dots-nav--centered d-none hd-lap-and-up">
            {% for block in section.blocks %}
              <button
                class="dots-nav__item tap-area"
                {% if forloop.index == 1 %}
                ap-currentaria="true{% else %}ap-currentaria="
                false"{% endif %}">
                <span class="visually-hidden">Go to slide {{ forloop.index }}</span>
              </button>
            {% endfor %}
          </ap-pagedots>
        </ap-carousel>
      </div>
    </div>
  </section>
{% endif %}


{% schema %}
  {
    "name": "Text with icons",
    "tag": "section",
    "class": "shopify-section--text-with-icons",
    "settings": [
      {
        "type": "checkbox",
        "id": "show",
        "label": "Show section",
        "default": true
      },
      {
        "type": "select",
        "id": "setwidthout",
        "label": "Width Slideshow",
        "default": "full",
        "options": [
          {
            "value": "container",
            "label": "Box"
          }, {
            "value": "container-fluid",
            "label": "Container Fluid"
          }, {
            "value": "full",
            "label": "Full"
          }
        ]
      },
      {
        "type": "image_picker",
        "id": "background_overlay",
        "label": "Background Image"
      },
      {
        "type": "color",
        "id": "section_background",
        "default": "#F5A44A",
        "label": "t:sections.all.section_background.label"
      }, {
        "type": "text",
        "id": "sub_heading",
        "default": "Sub heading",
        "label": "Sub heading"
      }, {
        "type": "liquid",
        "id": "tab_heading",
        "default": "Welcome to our store",
        "label": "t:sections.all.tab_heading.label"
      }, {
        "type": "range",
        "id": "tab_heading_size",
        "min": 1,
        "max": 6,
        "step": 1,
        "default": 2,
        "label": "t:sections.all.tab_heading_size.label"
      }, {
        "type": "text",
        "id": "tab_description",
        "label": "t:sections.all.tab_description.label"
      }, {
        "type": "select",
        "id": "text_align",
        "options": [
          {
            "value": "left",
            "label": "Left"
          }, {
            "value": "center",
            "label": "Center"
          }, {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "center",
        "label": "Text align"
      }, {
        "type": "color",
        "id": "heading_color",
        "default": "#282828",
        "label": "t:sections.all.heading_color.label"
      }, {
        "type": "color",
        "id": "title_color",
        "default": "#ffffff",
        "label": "t:sections.all.title_color.label"
      }, {
        "type": "color",
        "id": "text_color",
        "default": "#282828",
        "label": "t:sections.all.text_color.label"
      }, {
        "type": "color",
        "id": "color_svg",
        "default": "#fff",
        "label": "Color Icon Svg"
      }, {
        "type": "color",
        "id": "bg_color_item",
        "default": "#fff",
        "label": "Background color item"
      }, {
        "type": "checkbox",
        "id": "text_icon_top",
        "label": "Text icon top"
      }, {
        "type": "checkbox",
        "id": "border",
        "label": "Show Border"
      }, {
        "type": "text",
        "id": "margin_desktop",
        "label": "t:sections.all.margin_desktop.label",
        "info": "t:sections.all.margin_desktop.info"
      }, {
        "type": "text",
        "id": "margin_tablet",
        "label": "t:sections.all.margin_tablet.label",
        "info": "t:sections.all.margin_tablet.info"
      }, {
        "type": "text",
        "id": "margin_mobile",
        "label": "t:sections.all.margin_mobile.label",
        "info": "t:sections.all.margin_mobile.info"
      }, {
        "type": "text",
        "id": "padding_desktop",
        "label": "t:sections.all.padding_desktop.label",
        "info": "t:sections.all.padding_desktop.info"
      }, {
        "type": "text",
        "id": "padding_mobile",
        "label": "t:sections.all.padding_mobile.label",
        "info": "t:sections.all.padding_mobile.info"
      }, {
        "type": "image_picker",
        "id": "image_child",
        "label": "Image child"
      }, {
        "type": "header",
        "content": "Settings content item"
      }, {
        "type": "select",
        "id": "align_items",
        "options": [
          {
            "value": "start",
            "label": "Start"
          }, {
            "value": "center",
            "label": "Center"
          }, {
            "value": "end",
            "label": "End"
          }
        ],
        "default": "center",
        "label": "Align Items"
      }, {
        "type": "select",
        "id": "justify_content",
        "options": [
          {
            "value": "start",
            "label": "Start"
          }, {
            "value": "center",
            "label": "Center"
          }, {
            "value": "end",
            "label": "End"
          }
        ],
        "default": "center",
        "label": "Justify content"
      }
    ],
    "blocks": [
      {
        "type": "text-with-icon",
        "name": "Text with icons",
        "settings": [
          {
            "type": "select",
            "id": "width",
            "label": "Width",
            "default": "25%",
            "options": [
              {
                "value": "20%",
                "label": "20%"
              },
              {
                "value": "25%",
                "label": "25%"
              },
              {
                "value": "33%",
                "label": "33%"
              },
              {
                "value": "50%",
                "label": "50%"
              }, {
                "value": "75%",
                "label": "75%"
              }, {
                "value": "100%",
                "label": "100%"
              }
            ]
          },
          {
            "type": "select",
            "id": "svg_icon",
            "options": [
              {
                "value": "",
                "label": "None"
              },
              {
                "value": "icon-worldwide",
                "label": "Worldwide"
              },
              {
                "value": "icon-customer-support",
                "label": "Customer support"
              },
              {
                "value": "icon-wrapper",
                "label": "Wrapper"
              }, {
                "value": "icon-chat",
                "label": "Chat"
              }, {
                "value": "icon-love",
                "label": "Love"
              }, {
                "value": "icon-email",
                "label": "Email"
              }, {
                "value": "icon-plane",
                "label": "Plane"
              }, {
                "value": "icon-warranty",
                "label": "Warranty"
              }
            ],
            "default": "",
            "label": "Select icon"
          },
          {
            "type": "textarea",
            "id": "custom_icon",
            "label": "t:sections.all.custom_icon.label"
          },
          {
            "type": "text",
            "id": "heading",
            "default": "Text sample",
            "label": "t:sections.all.heading.label"
          }, {
            "type": "select",
            "id": "heading_size",
            "options": [
              {
                "value": "heading--xxsmall",
                "label": "t:sections.all.heading_size.options__1.label"
              },
              {
                "value": "heading--xsmall",
                "label": "t:sections.all.heading_size.options__2.label"
              },
              {
                "value": "heading--small",
                "label": "t:sections.all.heading_size.options__3.label"
              },
              {
                "value": "",
                "label": "t:sections.all.heading_size.options__4.label"
              }, {
                "value": "heading--large",
                "label": "t:sections.all.heading_size.options__5.label"
              }
            ],
            "default": "heading--small",
            "label": "t:sections.all.heading_size.label"
          }, {
            "type": "textarea",
            "id": "content",
            "default": "Testimonial content",
            "label": "t:sections.all.content.label"
          }, {
            "type": "text",
            "id": "button1_label",
            "label": "Button",
            "default": "Read More"
          }, {
            "type": "url",
            "id": "link1",
            "label": "Link"
          }, {
            "type": "color",
            "id": "color_btn",
            "label": "Color button"
          }, {
            "type": "color",
            "id": "bg_btn",
            "label": "Background button"
          }, {
            "type": "color",
            "id": "color_btn_hover",
            "label": "Color button hover"
          }, {
            "type": "color",
            "id": "bg_btn_hover",
            "label": "Background button hover"
          }, {
            "type": "select",
            "id": "style_btn",
            "label": "Style Button",
            "default": "btn-base",
            "options": [
              {
                "value": "btn-base",
                "label": "Button Base"
              }, {
                "value": "btn-outline",
                "label": "Button Out Line"
              }, {
                "value": "btn-line",
                "label": "Button Line"
              }, {
                "value": "btn-line-black",
                "label": "Button Line Black"
              }
            ]
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Text with icons",
        "blocks": [
          {
            "type": "text-with-icon"
          }, {
            "type": "text-with-icon"
          }, {
            "type": "text-with-icon"
          }, {
            "type": "text-with-icon"
          }
        ]
      }
    ]
  }
{% endschema %}