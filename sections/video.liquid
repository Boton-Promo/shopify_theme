{{ 'video-section.css' | asset_url | stylesheet_tag }}
{% render 'section-style' %}

<style>
  #shopify-section-{{ section.id }} {
    --heading-color: 255, 255, 255;
    --color-body: 255, 255, 255;
    --play-button-background: 255, 255, 255;
    --play-button-arrow: 12, 27, 84;
    --section-background: 255, 255, 255;
  }
</style>
<section class="section section--flush">
  <div class="video-section video-section--full video-section--medium">
    <ap-videoexternal provider="youtube" class="video-wrapper  video-wrapper--cover">
      <div class="video-wrapper__poster">
        {%- if section.settings.cover_image != blank -%}
          {%- capture sizes -%}{% if section.settings.full_width %}100vw{% else %}(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 }}px, (min-width: 750px) calc(100vw - 10rem), 100vw{% endif %}{%- endcapture -%}
          {%- assign alt = 'sections.video.load_video' | t: description: section.settings.description | escape -%}
          {{ section.settings.cover_image | image_url: width: 3840 | image_tag:
            loading: 'lazy',
            sizes: sizes,
            widths: '3840',
            alt: alt
          }}
        {%- else -%}
          {{ 'collection-2' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
        {%- endif -%}
        <div class="video-content-container">
          <div class="video-wrapper__poster-content">
            <div class="video-title">
              {{ section.settings.video_title }}
            </div>
            <div class="content-box content-box--large">
              <button type="button" class="video-wrapper__play-button video-wrapper__play-button--large video-wrapper__play-button--ripple" title="Play video">
                <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120" fill="none">
                  <circle cx="60" cy="60" r="59.5" stroke="white"/>
                  <g clip-path="url(#clip0_221_1946)">
                  <path d="M67.376 60.4161L56.777 67.4821C56.7017 67.5322 56.6142 67.5609 56.5239 67.5652C56.4336 67.5696 56.3437 67.5493 56.264 67.5066C56.1843 67.4639 56.1176 67.4004 56.0711 67.3228C56.0246 67.2452 56 67.1565 56 67.0661V52.9341C56 52.8436 56.0246 52.7549 56.0711 52.6773C56.1176 52.5997 56.1843 52.5362 56.264 52.4935C56.3437 52.4508 56.4336 52.4306 56.5239 52.4349C56.6142 52.4392 56.7017 52.468 56.777 52.5181L67.376 59.5841C67.4445 59.6297 67.5006 59.6916 67.5395 59.7642C67.5783 59.8367 67.5986 59.9178 67.5986 60.0001C67.5986 60.0824 67.5783 60.1634 67.5395 60.236C67.5006 60.3085 67.4445 60.3704 67.376 60.4161Z" fill="black"/>
                  </g>
                  <defs>
                  <clipPath id="clip0_221_1946">
                  <rect width="24" height="24" fill="white" transform="translate(48 48)"/>
                  </clipPath>
                  </defs>
                </svg>
              </button>
              <header class=" text-container">
                <h3 class="heading h2">{{ section.settings.heading }}</h3>
              </header>
            </div>
          </div>
        </div>
      </div>
      <template>
        {%- if section.settings.video_url.type == 'youtube' -%}
          <iframe title="{{ section.settings.heading }}" src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?playsinline=1&autoplay=1&playlist={{ section.settings.video_url.id }}&enablejsapi=1&rel=0&modestbranding=1&origin={{ shop.url }}" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe>
        {%- else -%}
          <iframe src="https://player.vimeo.com/video/{{ section.settings.video_url.id }}" class="js-vimeo" allow="autoplay; encrypted-media" allowfullscreen title="{{ section.settings.description | escape }}"></iframe>
        {%- endif -%}
        
      </template>
    </ap-videoexternal>
  </div>
</section>

{% schema %}
{
  "name": "t:sections.video.name",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "margin_desktop",
      "label": "t:sections.all.margin_desktop.label",
      "info": "t:sections.all.margin_desktop.info"
    },
    {
      "type": "text",
      "id": "margin_tablet",
      "label": "t:sections.all.margin_tablet.label",
      "info": "t:sections.all.margin_tablet.info"
    },
    {
      "type": "text",
      "id": "margin_mobile",
      "label": "t:sections.all.margin_mobile.label",
      "info": "t:sections.all.margin_mobile.info"
    },
    {
      "type": "liquid",
      "id": "video_title",
      "default": "Video",
      "label": "Video title"
    },
    {
      "type": "liquid",
      "id": "heading",
      "default": "Video",
      "label": "t:sections.video.settings.heading.label"
    },
    {
      "type": "image_picker",
      "id": "cover_image",
      "label": "t:sections.video.settings.cover_image.label"
    },
    {
      "type": "video_url",
      "id": "video_url",
      "accept": [
        "youtube",
        "vimeo"
      ],
      "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",
      "label": "t:sections.video.settings.video_url.label",
      "placeholder": "t:sections.video.settings.video_url.placeholder",
      "info": "t:sections.video.settings.video_url.info"
    },
    {
      "type": "text",
      "id": "description",
      "label": "t:sections.video.settings.description.label",
      "info": "t:sections.video.settings.description.info"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "t:sections.video.settings.full_width.label",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "t:sections.video.presets.name"
    }
  ]
}
{% endschema %}
